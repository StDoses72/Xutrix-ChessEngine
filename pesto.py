
# pesto.py

# -------------------------------------------------------------
# PeSTO Evaluation Tables (RofChade / Stockfish derivative)
# -------------------------------------------------------------

# 中局(MG)和残局(EG)的“纯材质”价值 (Material Value)
MG_VALUE = {'P': 82, 'N': 337, 'B': 365, 'R': 477, 'Q': 1025, 'K': 0}
EG_VALUE = {'P': 94, 'N': 281, 'B': 297, 'R': 512, 'Q': 936,  'K': 0}

# 游戏阶段权重 (用于计算当前是中局还是残局)
# 骑士=1, 象=1, 车=2, 后=4
GAME_PHASE_INC = {'N': 1, 'B': 1, 'R': 2, 'Q': 4}

# PeSTO 位置表 (White Perspective)
# 格式: (MG_Score, EG_Score)
# 索引 0-7 是 Rank 1 (底线), 索引 56-63 是 Rank 8

# Pawn
P = [
    ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),
    (98, 0), (134, 0), (61, 0), (95, 0), (68, 0), (126, 0), (34,-50), (-11,-50),
    (-6,-50), ( 7,-50), (26,-50), (31,-50), (65,-50), (56,-50), (25,-50), (-20,-50),
    (-14, 0), (13, 0), ( 6, 0), (21, 0), (23, 0), (12, 0), (17, 0), (-23, 0),
    (-27, 0), (-2, 0), (-5, 0), (12, 0), (17, 0), ( 6, 0), (10, 0), (-25, 0),
    (-26, 0), (-4, 0), (-4, 0), (-10, 0), ( 3, 0), ( 3, 0), (33, 0), (-12, 0),
    ( 0, 0),  ( 0, 0),  ( 0, 0), (20, 0), (20, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),
    ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0),  ( 0, 0)
]

# Knight
N = [
    (-167,-58), (-89,-38), (-34,-13), (-49,-28), ( 61,-31), (-97,-27), (-15,-63), (-107,-99),
    (-73,-25), (-41,-20), ( 72, 6), ( 36, 12), ( 23, 58), ( 62, 55), ( 7, 19), (-17,-46),
    (-47,-26), ( 60,-17), ( 37, 27), ( 65, 43), ( 84, 73), (129, 25), ( 73, 24), ( 44,-19),
    ( -9,-17), ( 17, 20), ( 19, 32), ( 53, 60), ( 37, 72), ( 69, 39), ( 18, 20), ( 22,-23),
    (-13,-20), ( 4, 29), ( 16, 17), ( 13, 48), ( 28, 73), ( 19, 73), ( 21, 38), ( -8,-13),
    (-23,-20), ( -9, 9), ( 12, 27), ( 10, 47), ( 19, 60), ( 17, 53), ( 25, 42), (-16,-17),
    (-29,-20), (-53,-20), (-12,-10), ( -3, 8), ( 11, 25), (-66, 18), (-40, 2), (-40,-15),
    (-105,-35), (-21,-26), (-58,-25), (-33,-28), (-17,-35), (-28,-22), (-19,-36), (-59,-56)
]

# Bishop
B = [
    (-29, -9), (  4, -4), (-82, -4), (-37, -4), (-25, -4), (-42, -4), (  7, -4), ( -8, -9),
    (-26, -9), ( 16, -4), (-62, -4), (-25, -4), (-23, -4), (-24, -4), ( 17, -4), (  0, -9),
    ( -7, -9), ( 21, -4), ( -9, -4), ( 17, -4), ( 16, -4), ( -8, -4), ( 15, -4), (  5, -9),
    ( -8, -9), ( 17, -4), ( 23, -4), ( 39, -4), ( 43, -4), ( 29, -4), (  6, -4), (  6, -9),
    (-10, -9), (  8, -4), ( 16, -4), ( 34, -4), ( 39, -4), ( 22, -4), (  3, -4), (-13, -9),
    (-13, -9), (  1, -4), (  8, -4), ( 11, -4), ( 13, -4), (  5, -4), (  8, -4), (-16, -9),
    (-30, -9), ( -2, -4), ( -8, -4), ( -4, -4), ( -5, -4), ( -4, -4), ( -6, -4), (-37, -9),
    (-25, -9), (-26, -4), (-47, -4), (-22, -4), (-32, -4), (-38, -4), (-15, -4), (-31, -9)
]

# Rook
R = [
    ( 32, 13), ( 42, 13), ( 32, 13), ( 51, 13), ( 63, 13), (  9, 13), ( 31, 13), ( 43, 13),
    ( 27, 13), ( 32, 13), ( 58, 13), ( 62, 13), ( 80, 13), ( 67, 13), ( 26, 13), ( 44, 13),
    ( -5, 13), ( 19, 13), ( 26, 13), ( 36, 13), ( 17, 13), ( 45, 13), ( 61, 13), ( 16, 13),
    (-24, 13), (-11, 13), (  7, 13), ( 26, 13), ( 24, 13), ( 35, 13), ( -8, 13), (-20, 13),
    (-36, 13), (-26, 13), (-12, 13), ( -1, 13), (  9, 13), ( -7, 13), (  6, 13), (-23, 13),
    (-45, 13), (-25, 13), (-16, 13), (-17, 13), (  3, 13), (  0, 13), ( -5, 13), (-33, 13),
    (-44, 13), (-16, 13), (-20, 13), ( -9, 13), ( -1, 13), ( 11, 13), ( -6, 13), (-71, 13),
    (-19, 13), (-13, 13), (  1, 13), ( 17, 13), ( 16, 13), (  7, 13), (-37, 13), (-26, 13)
]

# Queen
Q = [
    (-28,-69), (  0,-57), ( 29,-47), ( 12,-26), ( 59,-26), ( 44,-47), ( 43,-57), ( 45,-69),
    (-24,-54), (-39,-31), ( -5,-22), ( 18, -4), ( 16, -4), (  3,-22), ( 15,-31), (-19,-54),
    (-13,-39), (-17,-17), ( 18,  9), ( 19,  3), ( 46,  3), ( 25,  9), (-18,-17), ( 23,-39),
    ( -8,-24), (  4, -5), ( 22, 37), ( 24, 21), ( 56, 21), ( 44, 37), ( 57, -5), (  2,-24),
    (-12,-24), (-16, -5), ( 20, 37), ( 35, 21), ( 34, 21), ( 30, 37), (  7, -5), (-10,-24),
    (-21,-39), (-12,-17), (  1,  9), ( -8,  3), ( 34,  3), ( 12,  9), ( 10,-17), (-16,-39),
    ( -2,-54), ( -8,-31), ( 15,-22), ( 12, -4), ( 18, -4), (  8,-22), ( 37,-31), (  9,-54),
    (-23,-69), (-29,-57), (-12,-47), (-40,-26), (-30,-26), ( -5,-47), (-14,-57), (-25,-69)
]

# King
K = [
    (-65,-15), (-15, -4), ( -5, -3), (-15,-10), ( 28,-10), ( -5, -3), (-15, -4), (-65,-15),
    ( 14,  1), ( 18, 12), ( -2, 16), ( 18, 25), ( 15, 25), ( 22, 16), (  4, 12), ( 18,  1),
    (-20, 10), ( 17, 17), ( 13, 20), (  0, 31), (  8, 31), ( 14, 20), (  2, 17), (-20, 10),
    (-23, 20), (-20, 24), (-10, 35), ( -9, 45), ( -8, 45), (  0, 35), (-23, 24), (-16, 20),
    (-30, 25), (-34, 27), (-20, 42), ( -8, 51), ( -2, 51), ( 10, 42), (-19, 27), (-33, 25),
    (-34, 25), (-20, 27), (  2, 42), ( 11, 51), ( 21, 51), ( 35, 42), (  5, 27), (-32, 25),
    (-32, 35), (-18, 45), (  8, 58), ( 30, 65), ( 35, 65), ( 19, 58), (-13, 45), (-12, 35),
    (-47, 50), (-47, 68), (-37, 73), (-19, 78), (-25, 78), (-19, 73), (-16, 68), (-59, 50)
]

# 统一到一个字典方便查表
TABLES = {
    'P': P, 'N': N, 'B': B, 'R': R, 'Q': Q, 'K': K
}